---
sidebar_position: 6
---

# Building a dApp frontend

For building web frontends, the following [npm](https://www.npmjs.com/) packages work together to connect web pages to Archway Network.

- [@cosmjs/stargate](https://www.npmjs.com/package/@cosmjs/stargate)
- [@cosmjs/cosmwasm-stargate](https://www.npmjs.com/package/@cosmjs/cosmwasm-stargate)
- [@cosmjs/proto-signing](https://www.npmjs.com/package/@cosmjs/proto-signing)

#### @cosmjs/stargate
`@cosmjs/stargate` is client library for the Cosmos SDK.

#### @cosmjs/cosmwasm-stargate
`@cosmjs/cosmwasm-stargate` is an SDK to build CosmWasm clients. It extends `@cosmjs/stargate` with functionality for [CosmWasm](https://cosmwasm.com/) contracts.

#### @cosmjs/proto-signing
`@cosmjs/proto-signing` contains utilities for signing transactions from a wallet. It uses protobuf based signing as documented in [ADR-020](https://github.com/cosmos/cosmos-sdk/blob/66c5798cec/docs/architecture/adr-020-protobuf-transaction-encoding.md) and the [3 levels of proto encoding](https://warta.it/blog/cosmos-sdk-protobuf-signing).


### Connecting to Archway

Let's connect an end user to Archway Network using a wallet mnemonic.

:::danger
In a real world use case we'd authorize using a browser extension. In browser authentication is a feature still actively being working on.
:::

```js
import { DirectSecp256k1HdWallet } from "@cosmjs/proto-signing";
import { SigningCosmWasmClient } from "@cosmjs/cosmwasm-stargate";
import { GasPrice } from "@cosmjs/stargate";

const RPC = "https://rpc.constantine-1.archway.tech:443"; // Or, titus deployments: `const RPC = "https://rpc.titus-1.archway.tech:443";`
const BECH32_PREFIX = "archway";
const userAddress = process.env.ACCOUNT_ADDRESS; // Your account address (pub address for mnemonic)
const mnemonic = process.env.ACCOUNT_MNEMONIC; // Your test mnemonic

let user, CosmWasmClient, queryHandler, gasPrice;
const init = async () =>  {
  // User wallet
  user = await DirectSecp256k1HdWallet.fromMnemonic(mnemonic, { prefix: BECH32_PREFIX });
  // RPC access
  CosmWasmClient = await SigningCosmWasmClient.connectWithSigner(RPC, user);
  // Reference to querying a contract using the 'smart' query module
  queryHandler = CosmWasmClient.queryClient.wasm.queryContractSmart;
  // Gas price
  gasPrice = GasPrice.fromString('0.002uconst');

  console.log('dApp Initialized', {
    user: user,
    client: CosmWasmClient,
    queryHandler: queryHandler,
    gasPrice: gasPrice
  });
}
```

## Querying the counter

In the previous step we saved a reference to `CosmWasmClient.queryClient.wasm.queryContractSmart`. We'll use it to query our `QueryMsg::GetCount` entrypoint of the Increment contract. 

Just like when we queried from CLI, we need to convert entrypoints to lowercase and snake case. In JavaScript the arguments become `{get_count: {}}`.

```js
const getCount = async () => {
  // Your contract address
  const ContractAddress = process.env.CONTRACT_ADDRESS;
  // Query arguments
  let entrypoint = {
    get_count: {}
  };
  // Do query type 'smart'
  let queryResult = await queryHandler.query(ContractAddress, entrypoint);
  return queryResult;
},
```

## Incrementing the counter
Broadcasting transactions is likewise achieved using our reference to `CosmWasmClient`. Here we call the `execute` function from `CosmWasmClient` and serve it with:

1. **userAddress** - the address broadcasting the transaction
2. **ContractAddress** - the address of the contract the user is transacting with
3. **entrypoint** - arguments to be executed which match an entrypoint in the contract
4. **txFee** - transaction fees calculated by the `calculateFee` function from `@cosmjs/stargate`

We convert the case of entrypoint arguments to lowercase and snake case again, so `ExecuteMsg::Increment {}` from our Rust contract becomes `{increment: {}}` in our JavaScript.

```js
import { calculateFee } from "@cosmjs/stargate";

const incrementCounter = async () => {
  // Your contract address
  const ContractAddress = process.env.CONTRACT_ADDRESS;
  // Tx arguments
  let entrypoint = {
    increment: {}
  };
  // Gas fee estimation
  let txFee = calculateFee(300_000, gasPrice);
  // Send Tx
  let tx = await CosmWasmClient.execute(userAddress, ContractAddress, entrypoint, txFee);
  console.log('Increment Tx', tx);
}
```

## Clone it and try yourself

You'll find working examples of dApp frontends for the Increment starter code template in the [dApp examples repository](https://github.com/archway-network/dApp-examples). Examples are given in both [Vue.js](https://vuejs.org/) and [React](https://reactjs.org/).

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
  <TabItem value="vue" label="Vue.js" default>
    <a href="https://github.com/archway-network/dApp-examples/tree/main/vuejs/increment" target="_blank">Vue Increment</a>
  </TabItem>
  <TabItem value="react" label="React">
    <a href="https://github.com/archway-network/dApp-examples/tree/main/react/increment" target="_blank">React Increment</a>
  </TabItem>
</Tabs>