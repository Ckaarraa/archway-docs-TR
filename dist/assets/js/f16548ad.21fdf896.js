"use strict";(self.webpackChunkarchway_docs=self.webpackChunkarchway_docs||[]).push([[7359],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=p(n),m=r,g=d["".concat(l,".").concat(m)]||d[m]||c[m]||o;return n?a.createElement(g,i(i({ref:t},u),{},{components:n})):a.createElement(g,i({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},1084:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return u},default:function(){return d}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),i=["components"],s={sidebar_position:1},l="Creating Your First dApp",p={unversionedId:"create/guides/my-first-dapp",id:"create/guides/my-first-dapp",isDocsHomePage:!1,title:"Creating Your First dApp",description:"Starting out",source:"@site/docs/create/guides/my-first-dapp.md",sourceDirName:"create/guides",slug:"/create/guides/my-first-dapp",permalink:"/docs/create/guides/my-first-dapp",editUrl:"https://github.com/archway-network/archway-docs/edit/main/docs/create/guides/my-first-dapp.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Basics",permalink:"/docs/create/getting-started/basics"},next:{title:"Installation",permalink:"/docs/node/install"}},u=[{value:"Starting out",id:"starting-out",children:[]},{value:"Building and running tests",id:"building-and-running-tests",children:[]},{value:"Requesting Testnet funds",id:"requesting-testnet-funds",children:[]},{value:"Producing Wasm executables",id:"producing-wasm-executables",children:[{value:"Default Wasm executables",id:"default-wasm-executables",children:[]},{value:"CosmWasm executables",id:"cosmwasm-executables",children:[]}]},{value:"Deploying your dApp on chain",id:"deploying-your-dapp-on-chain",children:[]},{value:"Interacting with your dApp",id:"interacting-with-your-dapp",children:[{value:"Querying",id:"querying",children:[]},{value:"Transacting",id:"transacting",children:[]}]}],c={toc:u};function d(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"creating-your-first-dapp"},"Creating Your First dApp"),(0,o.kt)("h2",{id:"starting-out"},"Starting out"),(0,o.kt)("p",null,"In the ",(0,o.kt)("a",{parentName:"p",href:"/docs/create/getting-started/setup"},"Setup")," section we learned how to create and configure a new Archway project. "),(0,o.kt)("p",null,"If you haven't created a project yet (or didn't choose the 'Increment' starter template) go there now ",(0,o.kt)("a",{parentName:"p",href:"/docs/create/getting-started/setup"},"(link)")," to complete this step. "),(0,o.kt)("p",null,"Source code templates cloned with ",(0,o.kt)("inlineCode",{parentName:"p"},"archway new")," are ready-made starter projects. "),(0,o.kt)("p",null,"Later we'll add code and modify existing behavior, but to get acquainted let's build and test the boilerplate code we have now."),(0,o.kt)("h2",{id:"building-and-running-tests"},"Building and running tests"),(0,o.kt)("p",null,"Build your project using the command: "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"archway build\n")),(0,o.kt)("p",null,"Example output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Building project...\n\n  Updating crates.io index\n  Compiling libc v0.2.99\n  Compiling typenum v1.13.0\n  # And so on until ...\n  Compiling my-project v0.1.0 (/home/my-system-path/my-project)\n    Finished dev [unoptimized + debuginfo] target(s) in 31.42s\n")),(0,o.kt)("p",null,"Test your build like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"archway test\n")),(0,o.kt)("p",null,"Example output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Loading tests...\n\n   Compiling cosmwasm-schema v0.16.0\n   Compiling my-project v0.1.0 (/home/my-system-path/my-project)\n    Finished test [unoptimized + debuginfo] target(s) in 1.79s\n     Running target/debug/deps/my-project-713283db92dd8501\n\nrunning 3 tests\ntest contract::tests::proper_initialization ... ok\ntest contract::tests::increment ... ok\ntest contract::tests::reset ... ok\n\ntest result: ok. 3 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n")),(0,o.kt)("h2",{id:"requesting-testnet-funds"},"Requesting Testnet funds"),(0,o.kt)("p",null,"If you're working on a testnet you'll want testnet ",(0,o.kt)("inlineCode",{parentName:"p"},"ARC")," for paying gas costs to deploy your dApp code on chain."),(0,o.kt)("p",null,"Setting up a new project with ",(0,o.kt)("inlineCode",{parentName:"p"},"archway new")," and choosing a testnet bootstraps all configuration parameters you'll need to request  funds for both ",(0,o.kt)("inlineCode",{parentName:"p"},"stable [constantine]")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"nightly [titus]")," testnets."),(0,o.kt)("p",null,"Request funds using the command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"archway faucet\n")),(0,o.kt)("p",null,"Example output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'Enter an address to receive Testnet funds (e.g. "wasm1x35egm8883wzg2zwqkvcjp0j4g25p4hed4yjuv"; Or, hit <enter> to list accounts): wasm1x35egm8883wzg2zwqkvcjp0j4g25p4hed4yjuv\nRequesting faucet funds to account wasm1x35egm8883wzg2zwqkvcjp0j4g25p4hed4yjuv...\n\nWelcome to the faucet!\n\nCheck the full status via the /status endpoint.\nYou can get tokens from here by POSTing to /credit.\nSee https://github.com/cosmos/cosmjs/tree/main/packages/faucet for all further information.\n\nSuccessfully requested funds to wasm1x35egm8883wzg2zwqkvcjp0j4g25p4hed4yjuv on network pebblenet-1 using faucet https://faucet.pebblenet.cosmwasm.com\n')),(0,o.kt)("h2",{id:"producing-wasm-executables"},"Producing Wasm executables"),(0,o.kt)("p",null,"Since we've tested and built our contract, we're operating under the assumption everything works. "),(0,o.kt)("p",null,"However, to test our dApp on Archway we'll need to build it as a ",(0,o.kt)("inlineCode",{parentName:"p"},"wasm")," executable, and upload and instantiated it on chain."),(0,o.kt)("p",null,"Note there are 2 types of ",(0,o.kt)("inlineCode",{parentName:"p"},"wasm")," binaries that can be produced by the Developer CLI. It would be tempting to call them ",(0,o.kt)("em",{parentName:"p"},'"unoptimized"')," and ",(0,o.kt)("em",{parentName:"p"},'"optimized"')," ",(0,o.kt)("inlineCode",{parentName:"p"},"wasm"),", and while there's a sense in which that's true, it's a bit misleading. So we'll call them ",(0,o.kt)("em",{parentName:"p"},'"default"')," and ",(0,o.kt)("em",{parentName:"p"},'"cosmwasm"'),". "),(0,o.kt)("h3",{id:"default-wasm-executables"},"Default Wasm executables"),(0,o.kt)("p",null,"This is a regular ",(0,o.kt)("inlineCode",{parentName:"p"},"wasm")," binary. It's the same as you'd get by running the Rust native command ",(0,o.kt)("inlineCode",{parentName:"p"},"cargo wasm"),". "),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Default")," ",(0,o.kt)("inlineCode",{parentName:"p"},"wasm")," executables can be produced by the developer CLI using the command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"archway deploy --dryrun\n")),(0,o.kt)("p",null,"Example output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Building wasm executable...\n\n  Compiling proc-macro2 v1.0.28\n  Compiling unicode-xid v0.2.2\n  # And so on until ...\n  Compiling my-project v0.1.0 (/home/my-system-path/my-project)\n    Finished release [optimized] target(s) in 27.78s\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Note: use ",(0,o.kt)("inlineCode",{parentName:"strong"},"archway deploy --dryrun")," before doing an actual deployment. This helps to gauge whether the deployment will succeed. This is useful because of speed, as running ",(0,o.kt)("inlineCode",{parentName:"strong"},"archway deploy")," with ",(0,o.kt)("inlineCode",{parentName:"strong"},"--dryrun")," enabled is a lot faster.")),(0,o.kt)("h3",{id:"cosmwasm-executables"},"CosmWasm executables"),(0,o.kt)("p",null,"CosmWasm executables are also optimized release targets, but they're optimized using the ",(0,o.kt)("inlineCode",{parentName:"p"},"cosmwasm/rust-optimizer")," which produces a  smaller executable size. "),(0,o.kt)("p",null,"If you're coming from a C++ background, you can think of this process like building your executable with ",(0,o.kt)("a",{parentName:"p",href:"https://upx.github.io/"},"UPX"),", since ",(0,o.kt)("inlineCode",{parentName:"p"},"cosmwasm/rust-optimizer")," compresses the binary in a similar manner to produce smaller build outputs."),(0,o.kt)("p",null,"Producing CosmWasm executables is part of the deploy process and can be accessed by running the deploy command without the ",(0,o.kt)("inlineCode",{parentName:"p"},"--dryrun")," flag."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Note: the Developer CLI currently only supports the Docker version of ",(0,o.kt)("inlineCode",{parentName:"strong"},"cosmwasm/rust-optimizer"),". The deploy process will fail and exit if Docker has not been started (Support for native ",(0,o.kt)("inlineCode",{parentName:"strong"},"cosmwasm/rust-optimizer")," bins coming soon).")),(0,o.kt)("h2",{id:"deploying-your-dapp-on-chain"},"Deploying your dApp on chain"),(0,o.kt)("p",null,"When you're ready to deploy an on chain build we can start Docker (if not already running) and use the ",(0,o.kt)("inlineCode",{parentName:"p"},"archway deploy")," command."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"sudo service docker start\narchway deploy\n")),(0,o.kt)("p",null,"To skip the CLI asking you to provide any default values required by your dApp, include constructor arguments using the ",(0,o.kt)("inlineCode",{parentName:"p"},"--args")," parameter when you call the command. Format your constructor parameters as a ",(0,o.kt)("inlineCode",{parentName:"p"},"JSON")," encoded string."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'archway deploy --args \'{"my_key":"my value"}\'\n')),(0,o.kt)("p",null,"If you cloned the 'Increment' starter template, try deploying with your ",(0,o.kt)("inlineCode",{parentName:"p"},"counter")," argument set to ",(0,o.kt)("inlineCode",{parentName:"p"},"0"),"; e.g. ",(0,o.kt)("inlineCode",{parentName:"p"},"archway deploy --args '{\"count\":0}'")),(0,o.kt)("p",null,"If you didn't deploy with ",(0,o.kt)("inlineCode",{parentName:"p"},"--args"),", you'll need to enter that information into the CLI anyway, but why is the constructor ",(0,o.kt)("inlineCode",{parentName:"p"},'{"count":0}')," and how can we verify it? "),(0,o.kt)("p",null,"Open ",(0,o.kt)("inlineCode",{parentName:"p"},"src/contract.rs"),", near the top you'll see ",(0,o.kt)("inlineCode",{parentName:"p"},"pub fn instatiate")," which sets state in the contract at instatiation:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"let state = State {\n  count: msg.count, // Here's our count declaration\n  owner: info.sender.clone(), // Contract owner is wallet that sent tx\n};\n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"archway deploy")," is a developer super command that produces huge output. Since we're running the command without ",(0,o.kt)("inlineCode",{parentName:"p"},"--dryrun")),(0,o.kt)("p",null,"It doesn't make sense to list all of that output here, instead let's look at a step-by-step anatomy of what the command does. There are 5 steps in total."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"MAKE WASM")," - ",(0,o.kt)("em",{parentName:"li"},"Produces ",(0,o.kt)("inlineCode",{parentName:"em"},"wasm")," executable optimized and compressed with ",(0,o.kt)("inlineCode",{parentName:"em"},"cosmwasm/rust-optimizer"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"CREATE ON CHAIN WASM")," - ",(0,o.kt)("em",{parentName:"li"},"Uploads ",(0,o.kt)("inlineCode",{parentName:"em"},"wasm")," executable on chain")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"VERIFY UPLOAD INTEGRITY")," - ",(0,o.kt)("em",{parentName:"li"},"Downloads the uploaded ",(0,o.kt)("inlineCode",{parentName:"em"},"wasm")," and verifies on chain version matches checksum of local build")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"INSTANTIATE CONTRACT")," - ",(0,o.kt)("em",{parentName:"li"},"Creates an instance of the uploaded contract")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"STORE DEPLOYMENT LOG")," - ",(0,o.kt)("em",{parentName:"li"},"Creates log entries for steps 2 (upload) and 4 (instantiation) in ",(0,o.kt)("inlineCode",{parentName:"em"},"config.json")))),(0,o.kt)("p",null,"If you suceeded in deploying you'll now be able to query and transact with your dApp, but if you're unsure or suspect something may have gone wrong, check your deployments history using the ",(0,o.kt)("inlineCode",{parentName:"p"},"archway history")," command. Or, by opening ",(0,o.kt)("inlineCode",{parentName:"p"},"config.json")," at the root of the project and looking at the ",(0,o.kt)("inlineCode",{parentName:"p"},"deployments")," array. "),(0,o.kt)("p",null,"In your history you'll see 2 transactions were created: the ",(0,o.kt)("inlineCode",{parentName:"p"},"create")," transaction from when it was uploaded on chain; and, the ",(0,o.kt)("inlineCode",{parentName:"p"},"instantiate")," transaction which made an on chain instance that can queried and transacted with."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"archway history\n")),(0,o.kt)("p",null,"Example output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Printing deployments...\n\n[\n  {\n    type: 'instatiate',\n    address: 'wasm1rfa3scumm5y2lt6jku49hg52y2tk06pnsm9p6w',\n    chainId: 'pebblenet-1',\n    data: '{...}'\n  },\n  {\n    type: 'create',\n    codeId: '84',\n    chainId: 'pebblenet-1',\n    data: '{...}'\n  }\n]\n")),(0,o.kt)("h2",{id:"interacting-with-your-dapp"},"Interacting with your dApp"),(0,o.kt)("p",null,"Now it's possible to query and transact with your deployed instance. "),(0,o.kt)("h3",{id:"querying"},"Querying"),(0,o.kt)("p",null,"Queries read from the blockchain. They don't modify anything stored on chain so they don't cost a fee."),(0,o.kt)("p",null,"There are several types of queries we could do, but a common type we're interested in is ",(0,o.kt)("inlineCode",{parentName:"p"},"contract-state"),", which we'll call in ",(0,o.kt)("inlineCode",{parentName:"p"},"smart")," mode. This lets us run queries with arguments, as opposed to dumping the entire contract data."),(0,o.kt)("p",null,"If we query the ",(0,o.kt)("inlineCode",{parentName:"p"},"count")," before modifying any state, we get the value we set during deployment instatiation:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"archway query contract-state smart --args '{\"get_count\": {}}'\n")),(0,o.kt)("p",null,"Outputs:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'Attempting query...\n\n{"data":{"count":0}}\n\nOk!\n')),(0,o.kt)("p",null,"Why was the query argument ",(0,o.kt)("inlineCode",{parentName:"p"},"'{\"get_count\": {}}'"),"?"),(0,o.kt)("p",null,"If we open ",(0,o.kt)("inlineCode",{parentName:"p"},"src/contract.rs")," and inspect ",(0,o.kt)("inlineCode",{parentName:"p"},"pub fn query")," we'll see the case matching statement that matches our JSON query:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"pub fn query(deps: Deps, _env: Env, msg: QueryMsg) -> StdResult<Binary> {\n  match msg {\n      QueryMsg::GetCount {} => to_binary(&query_count(deps)?), // Here it is\n  }\n}\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Note: ",(0,o.kt)("inlineCode",{parentName:"strong"},"QueryMsg")," is an ",(0,o.kt)("inlineCode",{parentName:"strong"},"enum")," with the ",(0,o.kt)("inlineCode",{parentName:"strong"},"GetCount")," property. It's good to be aware of the format here, as the enum attribute is uppercase without spaces in Rust, but lowercase with snake case when converted to JSON arguments.")),(0,o.kt)("h3",{id:"transacting"},"Transacting"),(0,o.kt)("p",null,"Transactions write to the blockchain and cost gas a fee for modifying a contract's state securely."),(0,o.kt)("p",null,"By default gas estimatation mode is ",(0,o.kt)("inlineCode",{parentName:"p"},"auto"),", but you've got granular control. To modify gas settings edit the ",(0,o.kt)("inlineCode",{parentName:"p"},"gas")," values inside the ",(0,o.kt)("inlineCode",{parentName:"p"},"network")," object of your ",(0,o.kt)("inlineCode",{parentName:"p"},"config.json"),". However, for most cases the default gas settings are preferable."),(0,o.kt)("p",null,"To increment our counter value, we'll be executing a transaction that calls ",(0,o.kt)("inlineCode",{parentName:"p"},"pub fn try_increment")," in ",(0,o.kt)("inlineCode",{parentName:"p"},"src/contract.rs"),". This function is already public, but executing a transaction is handled by ",(0,o.kt)("inlineCode",{parentName:"p"},"pub fn execute")," in ",(0,o.kt)("inlineCode",{parentName:"p"},"src/contract.rs")," which does case matching to call ",(0,o.kt)("inlineCode",{parentName:"p"},"try_increment"),"."),(0,o.kt)("p",null,"Send an Increment transaction:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"archway tx --args '{\"increment\":{}}'\n")),(0,o.kt)("p",null,"Example output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'Attempting transaction...\n\nSend tx from which wallet in your keychain? (e.g. "main" or crtl+c to quit): my-wallet\nEnter keyring passphrase:\ngas estimate: 115945\n{"body":{"messages":[{"@type":"/cosmwasm.wasm.v1.MsgExecuteContract","sender":"wasm1j6aldkw59usszphp2jc9jlczxjzc76jdzspf8a","contract":"wasm1mkymgyhkdly5enpeq7tlyntnxvl539qnam2v3d","msg":"eyJpbmNyZW1lbnQiOnt9fQ==","funds":[]}],"memo":"","timeout_height":"0","extension_options":[],"non_critical_extension_options":[]},"auth_info":{"signer_infos":[],"fee":{"amount":[{"denom":"upebble","amount":"116"}],"gas_limit":"115945","payer":"","granter":""}},"signatures":[]}\n\nconfirm transaction before signing and broadcasting [y/N]: y\n{"height":"689581","txhash":"FE6CA15FB3B8295A7FFC0AA3FC307E6FE31E2AB606EB58774C2668CC1CACF6E8","data":"0A090A0765786563757465","raw_log":"[{\\"events\\":[{\\"type\\":\\"execute\\",\\"attributes\\":[{\\"key\\":\\"_contract_address\\",\\"value\\":\\"wasm1mkymgyhkdly5enpeq7tlyntnxvl539qnam2v3d\\"}]},{\\"type\\":\\"message\\",\\"attributes\\":[{\\"key\\":\\"action\\",\\"value\\":\\"execute\\"},{\\"key\\":\\"module\\",\\"value\\":\\"wasm\\"},{\\"key\\":\\"sender\\",\\"value\\":\\"wasm1j6aldkw59usszphp2jc9jlczxjzc76jdzspf8a\\"}]},{\\"type\\":\\"wasm\\",\\"attributes\\":[{\\"key\\":\\"_contract_address\\",\\"value\\":\\"wasm1mkymgyhkdly5enpeq7tlyntnxvl539qnam2v3d\\"},{\\"key\\":\\"method\\",\\"value\\":\\"try_increment\\"}]}]}]","logs":[{"events":[{"type":"execute","attributes":[{"key":"_contract_address","value":"wasm1mkymgyhkdly5enpeq7tlyntnxvl539qnam2v3d"}]},{"type":"message","attributes":[{"key":"action","value":"execute"},{"key":"module","value":"wasm"},{"key":"sender","value":"wasm1j6aldkw59usszphp2jc9jlczxjzc76jdzspf8a"}]},{"type":"wasm","attributes":[{"key":"_contract_address","value":"wasm1mkymgyhkdly5enpeq7tlyntnxvl539qnam2v3d"},{"key":"method","value":"try_increment"}]}]}],"gas_wanted":"115945","gas_used":"98755"}\n\nOk!\n')),(0,o.kt)("p",null,"To understand why the argument is ",(0,o.kt)("inlineCode",{parentName:"p"},"'{\"increment\":{}}'"),", if we open ",(0,o.kt)("inlineCode",{parentName:"p"},"src/contract.rs")," and inspect ",(0,o.kt)("inlineCode",{parentName:"p"},"pub fn execute")," we'll see the case matching statement that matches our JSON argument:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"pub fn execute(\n  deps: DepsMut,\n  _env: Env,\n  info: MessageInfo,\n  msg: ExecuteMsg,\n) -> Result<Response, ContractError> {\n  match msg {\n    ExecuteMsg::Increment {} => try_increment(deps), // Here it is\n    ExecuteMsg::Reset { count } => try_reset(deps, info, count),\n  }\n}\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Note: ",(0,o.kt)("inlineCode",{parentName:"strong"},"enum")," attributes again are converted. ",(0,o.kt)("inlineCode",{parentName:"strong"},"ExecuteMsg::Increment {}")," becomes ",(0,o.kt)("inlineCode",{parentName:"strong"},'{"increment":{}}')," in the CLI.")),(0,o.kt)("p",null,"Provided our ",(0,o.kt)("inlineCode",{parentName:"p"},'{"increment":{}}')," transaction succeeded, if we query ",(0,o.kt)("inlineCode",{parentName:"p"},"count")," again it will have increased by ",(0,o.kt)("inlineCode",{parentName:"p"},"1"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"archway query contract-state smart --args '{\"get_count\": {}}'\n")),(0,o.kt)("p",null,"Now outputs:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'Attempting query...\n\n{"data":{"count":1}}\n\nOk!\n')),(0,o.kt)("h4",{id:"congrats-you-made-it-to-the-end"},"Congrats, you made it to the end!"))}d.isMDXComponent=!0}}]);